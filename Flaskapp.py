{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "1a15769a-111e-47bd-be55-b1639f883bb6",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      " * Serving Flask app '__main__'\n",
      " * Debug mode: off\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\n",
      " * Running on http://127.0.0.1:2000\n",
      "Press CTRL+C to quit\n"
     ]
    }
   ],
   "source": [
    "from flask import Flask, request, render_template_string, redirect, url_for\n",
    "import numpy as np\n",
    "import pickle\n",
    "\n",
    "# Load the trained model\n",
    "model_path = 'heart_disease_model.pkl'  # Ensure this file is in the correct directory\n",
    "with open(model_path, 'rb') as file:\n",
    "    model = pickle.load(file)\n",
    "\n",
    "# Initialize the Flask app\n",
    "app = Flask(__name__)\n",
    "\n",
    "# Common CSS styles\n",
    "common_styles = '''\n",
    "    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');\n",
    "    \n",
    "    body, html {\n",
    "        height: 100%;\n",
    "        margin: 0;\n",
    "        font-family: 'Poppins', sans-serif;\n",
    "    }\n",
    "    .background {\n",
    "        position: fixed;\n",
    "        top: 0;\n",
    "        left: 0;\n",
    "        width: 100%;\n",
    "        height: 100%;\n",
    "        background: linear-gradient(45deg, #ff9a9e, #fad0c4, #ffecd2);\n",
    "        background-size: 400% 400%;\n",
    "        animation: gradientBG 15s ease infinite;\n",
    "        z-index: -1;\n",
    "    }\n",
    "    @keyframes gradientBG {\n",
    "        0% {background-position: 0% 50%;}\n",
    "        50% {background-position: 100% 50%;}\n",
    "        100% {background-position: 0% 50%;}\n",
    "    }\n",
    "    .content {\n",
    "        position: relative;\n",
    "        z-index: 1;\n",
    "        text-align: center;\n",
    "        padding: 50px 20px;\n",
    "        min-height: 100vh;\n",
    "        display: flex;\n",
    "        flex-direction: column;\n",
    "        justify-content: center;\n",
    "        align-items: center;\n",
    "        box-sizing: border-box;\n",
    "    }\n",
    "    h1, h2 {\n",
    "        font-size: 2.5em;\n",
    "        margin-bottom: 20px;\n",
    "        animation: fadeInDown 1s ease-out;\n",
    "        color: #333;\n",
    "        text-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n",
    "    }\n",
    "    p {\n",
    "        font-size: 1.2em;\n",
    "        margin-bottom: 30px;\n",
    "        max-width: 600px;\n",
    "        margin-left: auto;\n",
    "        margin-right: auto;\n",
    "        animation: fadeInUp 1s ease-out;\n",
    "        color: #555;\n",
    "    }\n",
    "    .btn, input[type=\"submit\"] {\n",
    "        background: #4CAF50;\n",
    "        color: white;\n",
    "        padding: 15px 30px;\n",
    "        border: none;\n",
    "        border-radius: 25px;\n",
    "        font-size: 1.2em;\n",
    "        cursor: pointer;\n",
    "        transition: all 0.3s ease;\n",
    "        text-decoration: none;\n",
    "        display: inline-block;\n",
    "        animation: fadeIn 1.5s ease-out;\n",
    "        box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n",
    "    }\n",
    "    .btn:hover, input[type=\"submit\"]:hover {\n",
    "        background: #45a049;\n",
    "        transform: translateY(-3px);\n",
    "        box-shadow: 0 6px 8px rgba(0,0,0,0.15);\n",
    "    }\n",
    "    .developer {\n",
    "        position: fixed;\n",
    "        bottom: 20px;\n",
    "        right: 20px;\n",
    "        font-size: 0.9em;\n",
    "        opacity: 0.7;\n",
    "        color: #333;\n",
    "    }\n",
    "    @keyframes fadeInDown {\n",
    "        from {opacity: 0; transform: translateY(-20px);}\n",
    "        to {opacity: 1; transform: translateY(0);}\n",
    "    }\n",
    "    @keyframes fadeInUp {\n",
    "        from {opacity: 0; transform: translateY(20px);}\n",
    "        to {opacity: 1; transform: translateY(0);}\n",
    "    }\n",
    "    @keyframes fadeIn {\n",
    "        from {opacity: 0;}\n",
    "        to {opacity: 1;}\n",
    "    }\n",
    "    form {\n",
    "        display: flex;\n",
    "        flex-direction: column;\n",
    "        align-items: center;\n",
    "        animation: fadeIn 1.5s ease-out;\n",
    "        width: 100%;\n",
    "        max-width: 400px;\n",
    "    }\n",
    "    .input-group {\n",
    "        position: relative;\n",
    "        margin-bottom: 20px;\n",
    "        width: 100%;\n",
    "    }\n",
    "    input, select {\n",
    "        width: 100%;\n",
    "        padding: 15px;\n",
    "        border: none;\n",
    "        border-radius: 25px;\n",
    "        background: rgba(255, 255, 255, 0.8);\n",
    "        font-size: 1em;\n",
    "        transition: all 0.3s ease;\n",
    "        box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n",
    "    }\n",
    "    input:focus, select:focus {\n",
    "        outline: none;\n",
    "        background: rgba(255, 255, 255, 0.95);\n",
    "        box-shadow: 0 4px 8px rgba(0,0,0,0.15);\n",
    "    }\n",
    "    .input-group label {\n",
    "        position: absolute;\n",
    "        left: 15px;\n",
    "        top: 50%;\n",
    "        transform: translateY(-50%);\n",
    "        color: #777;\n",
    "        transition: all 0.3s ease;\n",
    "        pointer-events: none;\n",
    "    }\n",
    "    .input-group input:focus + label,\n",
    "    .input-group input:not(:placeholder-shown) + label {\n",
    "        top: -10px;\n",
    "        left: 10px;\n",
    "        font-size: 0.8em;\n",
    "        background: rgba(255, 255, 255, 0.8);\n",
    "        padding: 0 5px;\n",
    "        border-radius: 10px;\n",
    "    }\n",
    "    .radio-group {\n",
    "        display: flex;\n",
    "        justify-content: center;\n",
    "        margin-bottom: 20px;\n",
    "        width: 100%;\n",
    "    }\n",
    "    .radio-group label {\n",
    "        margin: 0 10px;\n",
    "        cursor: pointer;\n",
    "    }\n",
    "    .result {\n",
    "        margin-top: 20px;\n",
    "        padding: 20px;\n",
    "        background: rgba(255, 255, 255, 0.8);\n",
    "        border-radius: 10px;\n",
    "        animation: fadeIn 1.5s ease-out;\n",
    "        box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n",
    "    }\n",
    "    .prediction-form {\n",
    "        display: grid;\n",
    "        grid-template-columns: repeat(2, 1fr);\n",
    "        gap: 15px;\n",
    "        width: 100%;\n",
    "        max-width: 800px;\n",
    "    }\n",
    "    .prediction-form .input-group {\n",
    "        margin-bottom: 0;\n",
    "    }\n",
    "    .prediction-form .radio-group {\n",
    "        grid-column: span 2;\n",
    "    }\n",
    "    .prediction-form input[type=\"submit\"] {\n",
    "        grid-column: span 2;\n",
    "        margin-top: 20px;\n",
    "    }\n",
    "'''\n",
    "\n",
    "# HTML template for welcome page\n",
    "welcome_template = f'''\n",
    "<!DOCTYPE html>\n",
    "<html lang=\"en\">\n",
    "<head>\n",
    "    <meta charset=\"UTF-8\">\n",
    "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n",
    "    <title>ðŸ«€</title>\n",
    "    <style>\n",
    "        {common_styles}\n",
    "    </style>\n",
    "</head>\n",
    "<body>\n",
    "    <div class=\"background\"></div>\n",
    "    <div class=\"content\">\n",
    "        <h1>Welcome to Heart Disease Predictor</h1>\n",
    "        <p>Our advanced machine learning model helps predict the likelihood of heart disease based on various health factors. Login to get started with your prediction.</p>\n",
    "        <a href=\"{{{{ url_for('login') }}}}\" class=\"btn\">Login</a>\n",
    "    </div>\n",
    "    <div class=\"developer\">Developed by LIKITH G S</div>\n",
    "</body>\n",
    "</html>\n",
    "'''\n",
    "\n",
    "# HTML template for login page\n",
    "login_template = f'''\n",
    "<!DOCTYPE html>\n",
    "<html lang=\"en\">\n",
    "<head>\n",
    "    <meta charset=\"UTF-8\">\n",
    "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n",
    "    <title>ðŸ«€Login </title>\n",
    "    <style>\n",
    "        {common_styles}\n",
    "    </style>\n",
    "</head>\n",
    "<body>\n",
    "    <div class=\"background\"></div>\n",
    "    <div class=\"content\">\n",
    "        <h2>Login</h2>\n",
    "        <form method=\"POST\" action=\"/predict_page\">\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"text\" name=\"name\" id=\"name\" placeholder=\" \" required>\n",
    "                <label for=\"name\">Name</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"phone\" id=\"phone\" placeholder=\" \" required>\n",
    "                <label for=\"phone\">Phone Number</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"text\" name=\"address\" id=\"address\" placeholder=\" \" required>\n",
    "                <label for=\"address\">Address</label>\n",
    "            </div>\n",
    "            <input type=\"submit\" value=\"Login\">\n",
    "        </form>\n",
    "    </div>\n",
    "    <div class=\"developer\">Developed by LIKITH G S</div>\n",
    "</body>\n",
    "</html>\n",
    "'''\n",
    "\n",
    "# HTML template for prediction page\n",
    "prediction_template = f'''\n",
    "<!DOCTYPE html>\n",
    "<html lang=\"en\">\n",
    "<head>\n",
    "    <meta charset=\"UTF-8\">\n",
    "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n",
    "    <title>ðŸ«€Heart Disease Prediction</title>\n",
    "    <style>\n",
    "        {common_styles}\n",
    "    </style>\n",
    "</head>\n",
    "<body>\n",
    "    <div class=\"background\"></div>\n",
    "    <div class=\"content\">\n",
    "        <h2>Heart Disease Prediction</h2>\n",
    "        <form method=\"POST\" action=\"/predict\" class=\"prediction-form\">\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"age\" id=\"age\" placeholder=\" \" required>\n",
    "                <label for=\"age\">Age</label>\n",
    "            </div>\n",
    "            <div class=\"radio-group\">\n",
    "                <label><input type=\"radio\" name=\"sex\" value=\"0\" required> Male</label>\n",
    "                <label><input type=\"radio\" name=\"sex\" value=\"1\"> Female</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"cp\" id=\"cp\" placeholder=\" \" required>\n",
    "                <label for=\"cp\">CP</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"trestbps\" id=\"trestbps\" placeholder=\" \" required>\n",
    "                <label for=\"trestbps\">Trestbps</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"chol\" id=\"chol\" placeholder=\" \" required>\n",
    "                <label for=\"chol\">Chol</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"fbs\" id=\"fbs\" placeholder=\" \" required>\n",
    "                <label for=\"fbs\">Fbs</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"restecg\" id=\"restecg\" placeholder=\" \" required>\n",
    "                <label for=\"restecg\">Restecg</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"thalach\" id=\"thalach\" placeholder=\" \" required>\n",
    "                <label for=\"thalach\">Thalach</label>\n",
    "            </div>\n",
    "            <div class=\"radio-group\">\n",
    "                <label><input type=\"radio\" name=\"exang\" value=\"0\" required> No Exang</label>\n",
    "                <label><input type=\"radio\" name=\"exang\" value=\"1\"> Yes Exang</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"oldpeak\" id=\"oldpeak\" placeholder=\" \" required>\n",
    "                <label for=\"oldpeak\">Oldpeak</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"slope\" id=\"slope\" placeholder=\" \" required>\n",
    "                <label for=\"slope\">Slope</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"ca\" id=\"ca\" placeholder=\" \" required>\n",
    "                <label for=\"ca\">Ca</label>\n",
    "            </div>\n",
    "            <div class=\"input-group\">\n",
    "                <input type=\"number\" name=\"thal\" id=\"thal\" placeholder=\" \" required>\n",
    "                <label for=\"thal\">Thal</label>\n",
    "            </div>\n",
    "            <input type=\"submit\" value=\"Predict\">\n",
    "        </form>\n",
    "        {{% if prediction %}}\n",
    "        <div class=\"result\">\n",
    "            {{{{ prediction }}}}\n",
    "        </div>\n",
    "        {{% endif %}}\n",
    "    </div>\n",
    "    <div class=\"developer\">Developed by LIKITH G S</div>\n",
    "</body>\n",
    "</html>\n",
    "'''\n",
    "\n",
    "@app.route('/')\n",
    "def welcome():\n",
    "    return render_template_string(welcome_template)\n",
    "\n",
    "@app.route('/login')\n",
    "def login():\n",
    "    return render_template_string(login_template)\n",
    "\n",
    "@app.route('/predict_page', methods=['POST'])\n",
    "def predict_page():\n",
    "    name = request.form['name']\n",
    "    phone = request.form['phone']\n",
    "    address = request.form['address']\n",
    "    return render_template_string(prediction_template, name=name, phone=phone, address=address)\n",
    "\n",
    "@app.route('/predict', methods=['POST'])\n",
    "def predict():\n",
    "    # Gather input data from the form\n",
    "    input_data = np.array([[\n",
    "        float(request.form['age']),\n",
    "        int(request.form['sex']),\n",
    "        float(request.form['cp']),\n",
    "        float(request.form['trestbps']),\n",
    "        float(request.form['chol']),\n",
    "        float(request.form['fbs']),\n",
    "        float(request.form['restecg']),\n",
    "        float(request.form['thalach']),\n",
    "        int(request.form['exang']),\n",
    "        float(request.form['oldpeak']),\n",
    "        float(request.form['slope']),\n",
    "        float(request.form['ca']),\n",
    "        float(request.form['thal'])\n",
    "    ]])\n",
    "\n",
    "    # Use the loaded model to make predictions\n",
    "    prediction = model.predict(input_data)\n",
    "    result = \"Heart Disease Detected\" if prediction[0] == 1 else \"No Heart Disease Detected\"\n",
    "\n",
    "    return render_template_string(prediction_template, prediction=result)\n",
    "\n",
    "if __name__ == '__main__':\n",
    "    app.run(port=2000)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "81eaa5fe-90e1-486c-843b-0d5f14ca7018",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.6"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
